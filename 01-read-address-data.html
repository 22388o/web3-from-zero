<!DOCTYPE html>

<title>01 Reading Address Data - Web3 From Zero</title>
<h1>01 Reading Address Data</h1>

<p>
  An address can point to an account or a smart contract, both can have a
  balance of Ether, the native currency of the Ethereum network. An account is
  usually directly controlled by a user, a smart contract is an application
  running autonomously on the blockchain.
</p>
<p>
  We can read data stored at that address on the chain with the help of an
  ethers.js provider. Using the <code>getBalance</code> function, we can read
  the Ether balance of an address.
</p>
<pre>
  const provider = ethers.getDefaultProvider()
  const balance = await provider.getBalance(
    "0xdd00Cc906B93419814443Bb913949d503B3DF3c4"
  )
</pre>

<p>
  Ethers.js packaged the balance with the <code>BigNumber</code> type, because
  the value is too big for JavaScript's number type. We have to convert the
  balance to a string with the right amount of decimal points to display it in a
  human readable way.
</p>

<p>
  For this conversion, we can use the utility functions ethers.js includes. The
  <code>formatUnits</code> function will automatically try to convert a
  <code>BigNumber</code> to an <code>string</code> with the right decimal
  points.
</p>

<pre>
  pre.innerText = ethers.utils.formatUnits(balance) + " ETH"
</pre>

<h2>Balance of address 0xdd00Cc906B...</h2>

<pre id="target1">Loading...</pre>

<p>
  Antoher information we can get from an address is its transaction count. We
  can use this count to keep track of an accounts activities.
</p>

<pre>
  const transactionCount = await provider.getTransactionCount(
    "0xdd00Cc906B93419814443Bb913949d503B3DF3c4"
  )
</pre>

<h2>Transaction count of address 0xdd00Cc906B...</h2>

<pre id="target2">Loading...</pre>

<div>
  <a href="00-connect-to-blockchain.html"><< 00 Connect to the Blockchain</a>
  -
  <a href="02-using-ens.html">02 Using the Ethereum Name Service >></a>
</div>

<script type="module">
  import { ethers } from "//unpkg.com/ethers@5.5.1/dist/ethers.esm.min.js"

  const provider = ethers.getDefaultProvider()
  {
    const balance = await provider.getBalance(
      "0xdd00Cc906B93419814443Bb913949d503B3DF3c4"
    )

    const pre = document.querySelector("#target1")
    pre.innerText = ethers.utils.formatUnits(balance) + " ETH"
  }

  {
    const transactionCount = await provider.getTransactionCount(
      "0xdd00Cc906B93419814443Bb913949d503B3DF3c4"
    )

    const pre = document.querySelector("#target2")
    pre.innerText = transactionCount
  }
</script>

<!-- Styling Boilerplate -->
<link rel="stylesheet" href="//unpkg.com/bamboo.css@1.3.7/dist/dark.min.css" />
<link
  rel="stylesheet"
  href="//unpkg.com/@highlightjs/cdn-assets@11.3.1/styles/default.min.css"
/>
<script src="//unpkg.com/@highlightjs/cdn-assets@11.3.1/highlight.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", () =>
    document.querySelectorAll("pre").forEach((el) => hljs.highlightElement(el))
  )
</script>
